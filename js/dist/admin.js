(function(t,g,o){"use strict";class c{constructor(e){this.extensionId=e,this.extensionData=t.extensionData.for(e)}registerSocialMediaSettings(){const e=["Kick","Facebook","Twitter","YouTube","Instagram"];for(const n of e)this.extensionData.registerSetting({setting:`${this.extensionId}.Social${n}Url`,type:"url",label:String(t.translator.trans(`wusong8899-tag-tiles.admin.Social${n}Url`)),help:String(t.translator.trans(`wusong8899-tag-tiles.admin.Social${n}UrlHelp`))}),this.extensionData.registerSetting({setting:`${this.extensionId}.Social${n}Icon`,type:"text",label:String(t.translator.trans(`wusong8899-tag-tiles.admin.Social${n}Icon`)),help:String(t.translator.trans(`wusong8899-tag-tiles.admin.Social${n}IconHelp`))});return this}registerAdvancedSplideSettings(){return this.extensionData.registerSetting({setting:`${this.extensionId}.AdvancedSplideMinSlidesForLoop`,type:"number",label:String(t.translator.trans("wusong8899-tag-tiles.admin.AdvancedSplideMinSlidesForLoop")),help:String(t.translator.trans("wusong8899-tag-tiles.admin.AdvancedSplideMinSlidesForLoopHelp"))}),this.extensionData.registerSetting({setting:`${this.extensionId}.AdvancedSplideEnableAutoplay`,type:"boolean",label:String(t.translator.trans("wusong8899-tag-tiles.admin.AdvancedSplideEnableAutoplay")),help:String(t.translator.trans("wusong8899-tag-tiles.admin.AdvancedSplideEnableAutoplayHelp"))}),this.extensionData.registerSetting({setting:`${this.extensionId}.AdvancedSplideAutoplayInterval`,type:"number",label:String(t.translator.trans("wusong8899-tag-tiles.admin.AdvancedSplideAutoplayInterval")),help:String(t.translator.trans("wusong8899-tag-tiles.admin.AdvancedSplideAutoplayIntervalHelp"))}),this.extensionData.registerSetting({setting:`${this.extensionId}.AdvancedSplideEnableLoopMode`,type:"boolean",label:String(t.translator.trans("wusong8899-tag-tiles.admin.AdvancedSplideEnableLoopMode")),help:String(t.translator.trans("wusong8899-tag-tiles.admin.AdvancedSplideEnableLoopModeHelp"))}),this.extensionData.registerSetting({setting:`${this.extensionId}.AdvancedSplideTransitionSpeed`,type:"number",label:String(t.translator.trans("wusong8899-tag-tiles.admin.AdvancedSplideTransitionSpeed")),help:String(t.translator.trans("wusong8899-tag-tiles.admin.AdvancedSplideTransitionSpeedHelp"))}),this.extensionData.registerSetting({setting:`${this.extensionId}.AdvancedSplideGap`,type:"string",label:String(t.translator.trans("wusong8899-tag-tiles.admin.AdvancedSplideGap")),help:String(t.translator.trans("wusong8899-tag-tiles.admin.AdvancedSplideGapHelp"))}),this.extensionData.registerSetting({setting:`${this.extensionId}.AdvancedSplidePauseOnMouseEnter`,type:"boolean",label:String(t.translator.trans("wusong8899-tag-tiles.admin.AdvancedSplidePauseOnMouseEnter")),help:String(t.translator.trans("wusong8899-tag-tiles.admin.AdvancedSplidePauseOnMouseEnterHelp"))}),this.extensionData.registerSetting({setting:`${this.extensionId}.AdvancedSplideEnableGrabCursor`,type:"boolean",label:String(t.translator.trans("wusong8899-tag-tiles.admin.AdvancedSplideEnableGrabCursor")),help:String(t.translator.trans("wusong8899-tag-tiles.admin.AdvancedSplideEnableGrabCursorHelp"))}),this.extensionData.registerSetting({setting:`${this.extensionId}.AdvancedSplideEnableFreeMode`,type:"boolean",label:String(t.translator.trans("wusong8899-tag-tiles.admin.AdvancedSplideEnableFreeMode")),help:String(t.translator.trans("wusong8899-tag-tiles.admin.AdvancedSplideEnableFreeModeHelp"))}),this}registerAdvertisementSettings(){return this.extensionData.registerSetting({setting:`${this.extensionId}.EnableAds`,type:"boolean",label:String(t.translator.trans("wusong8899-tag-tiles.admin.EnableAds")),help:String(t.translator.trans("wusong8899-tag-tiles.admin.EnableAdsHelp"))}),this.extensionData.registerSetting({setting:`${this.extensionId}.AdAutoplayInterval`,type:"number",label:String(t.translator.trans("wusong8899-tag-tiles.admin.AdAutoplayInterval")),help:String(t.translator.trans("wusong8899-tag-tiles.admin.AdAutoplayIntervalHelp"))}),this}registerAllSettings(){return this.registerSocialMediaSettings().registerAdvancedSplideSettings().registerAdvertisementSettings()}}const u={EXTENSION_ID:"wusong8899-tag-tiles"},h=(d=u.EXTENSION_ID)=>{new c(d).registerAllSettings()};class S extends g{constructor(){super(...arguments),this.ads=[],this.loading=!1,this.nextId=1,this.saveTimeouts={}}oninit(e){super.oninit(e),this.loadExistingAds()}loadExistingAds(){const{extensionId:e}=this.attrs,n=[];for(let s=1;s<=100;s++){const a=`${e}.AdLink${s}`,i=`${e}.AdImage${s}`,l=t.data.settings[a]||"",r=t.data.settings[i]||"";r&&(n.push({id:s,link:l,image:r}),this.nextId=Math.max(this.nextId,s+1))}this.ads=n,n.length===0&&this.addAd()}addAd(){const e={id:this.nextId++,link:"",image:""};this.ads.push(e),m.redraw()}removeAd(e){const{extensionId:n}=this.attrs,s=this.ads.findIndex(i=>i.id===e);if(s===-1)return;const a=this.ads[s];this.saveSetting(`${n}.AdLink${a.id}`,""),this.saveSetting(`${n}.AdImage${a.id}`,""),this.ads.splice(s,1),this.ads.length===0&&this.addAd(),m.redraw()}updateAd(e,n,s){const{extensionId:a}=this.attrs,i=this.ads.find(r=>r.id===e);if(!i)return;i[n]=s;const l=n==="link"?`${a}.AdLink${i.id}`:`${a}.AdImage${i.id}`;this.saveSetting(l,s)}saveSetting(e,n){this.saveTimeouts[e]&&clearTimeout(this.saveTimeouts[e]),this.saveTimeouts[e]=setTimeout(()=>{t.data.settings[e]=n,t.request({method:"POST",url:t.forum.attribute("apiUrl")+"/settings",body:{[e]:n}}).catch(()=>{}),delete this.saveTimeouts[e]},500)}previewImage(e){if(!e)return;const n=window.open("","_blank","width=800,height=600");n&&n.document.write(`
        <html>
          <head><title>Advertisement Preview</title></head>
          <body style="margin:0;padding:20px;text-align:center;background:#f5f5f5;">
            <h3>Advertisement Preview</h3>
            <img src="${e}" style="max-width:100%;max-height:80vh;border:1px solid #ddd;border-radius:4px;" />
          </body>
        </html>
      `)}isValidUrl(e){if(!e)return!0;try{return new URL(e),!0}catch{return!1}}view(){const{extensionId:e}=this.attrs;return m("div",{className:"Form-group"},m("label",{className:"FormLabel"},t.translator.trans("wusong8899-tag-tiles.admin.AdSettings")),m("div",{className:"helpText"},t.translator.trans("wusong8899-tag-tiles.admin.AdSettingsHelp")),m("div",{className:"DynamicAdSettings"},this.ads.map((n,s)=>this.renderAd(n,s)),m("div",{className:"DynamicAdSettings-addButton",style:{marginTop:"15px"}},m(o,{className:"Button Button--primary",icon:"fas fa-plus",onclick:()=>this.addAd()},t.translator.trans("wusong8899-tag-tiles.admin.AddAd"))),m("div",{className:"Form-group",style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid #e8e8e8"}},m("div",null,m("label",{className:"checkbox"},m("input",{type:"checkbox",checked:t.data.settings[`${e}.EnableAds`]==="1",onchange:n=>{const s=n.target;this.saveSetting(`${e}.EnableAds`,s.checked?"1":"0")}}),t.translator.trans("wusong8899-tag-tiles.admin.EnableAds")),m("div",{className:"helpText"},t.translator.trans("wusong8899-tag-tiles.admin.EnableAdsHelp"))))))}renderAd(e,n){const{extensionId:s}=this.attrs,a=e.image&&this.isValidUrl(e.image),i=this.isValidUrl(e.link);return m("div",{className:"DynamicAdSettings-ad",key:e.id,style:{border:"1px solid #ddd",borderRadius:"6px",padding:"15px",marginBottom:"15px",backgroundColor:"#f9f9f9"}},m("div",{className:"DynamicAdSettings-adHeader",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},m("h4",{style:{margin:0}},t.translator.trans("wusong8899-tag-tiles.admin.AdNumber",{number:n+1})),m("div",null,e.image&&m(o,{className:"Button Button--primary",icon:"fas fa-eye",onclick:()=>this.previewImage(e.image),style:{marginRight:"8px"}},t.translator.trans("wusong8899-tag-tiles.admin.PreviewAd")),m(o,{className:"Button Button--danger",icon:"fas fa-trash",onclick:()=>this.removeAd(e.id),disabled:this.ads.length===1},t.translator.trans("wusong8899-tag-tiles.admin.DeleteAd")))),m("div",{className:"DynamicAdSettings-adFields"},m("div",{className:"Form-group"},m("label",{className:"FormLabel"},t.translator.trans("wusong8899-tag-tiles.admin.AdImage")," *"),m("input",{className:`FormControl ${a?"":"error"}`,type:"url",placeholder:"https://example.com/ad-image.jpg",value:e.image,oninput:l=>{const r=l.target;this.updateAd(e.id,"image",r.value)}}),!a&&e.image&&m("div",{className:"helpText error"},t.translator.trans("wusong8899-tag-tiles.admin.InvalidImageUrl"))),m("div",{className:"Form-group"},m("label",{className:"FormLabel"},t.translator.trans("wusong8899-tag-tiles.admin.AdLink")),m("input",{className:`FormControl ${i?"":"error"}`,type:"url",placeholder:"https://example.com (optional)",value:e.link,oninput:l=>{const r=l.target;this.updateAd(e.id,"link",r.value)}}),!i&&e.link&&m("div",{className:"helpText error"},t.translator.trans("wusong8899-tag-tiles.admin.InvalidLinkUrl")),m("div",{className:"helpText"},t.translator.trans("wusong8899-tag-tiles.admin.AdLinkHelp")))))}onremove(){Object.values(this.saveTimeouts).forEach(e=>{clearTimeout(e)}),this.saveTimeouts={}}}t.initializers.add("wusong8899-tag-tiles",()=>{h(),t.extensionData.for("wusong8899-tag-tiles").registerSetting(()=>m(S,{extensionId:"wusong8899-tag-tiles"}))})})(flarum.core.compat["admin/app"],flarum.core.compat["common/Component"],flarum.core.compat["common/components/Button"]);
//# sourceMappingURL=admin.js.map

module.exports={};