{"version":3,"file":"admin.js","sources":["../src/admin/settings-generator.ts","../src/admin/components/dynamic-ad-settings.tsx","../src/admin/index.ts"],"sourcesContent":["import app from 'flarum/admin/app';\nimport type { ExtensionData } from '../common/config/types';\n\n/**\n * Settings generator utility for TagTiles admin interface\n */\nexport class SettingsGenerator {\n    private extensionId: string;\n    private extensionData: ExtensionData;\n\n    constructor(extensionId: string) {\n        this.extensionId = extensionId;\n        this.extensionData = app.extensionData.for(extensionId) as ExtensionData;\n    }\n\n    /**\n     * Register social media settings\n     */\n    registerSocialMediaSettings(): this {\n        const socialPlatforms = ['Kick', 'Facebook', 'Twitter', 'YouTube', 'Instagram'];\n\n        for (const platform of socialPlatforms) {\n            // URL setting\n            this.extensionData.registerSetting({\n                setting: `${this.extensionId}.Social${platform}Url`,\n                type: 'url',\n                label: String(app.translator.trans(`wusong8899-tag-tiles.admin.Social${platform}Url`)),\n                help: String(app.translator.trans(`wusong8899-tag-tiles.admin.Social${platform}UrlHelp`)),\n            });\n\n            // Icon setting\n            this.extensionData.registerSetting({\n                setting: `${this.extensionId}.Social${platform}Icon`,\n                type: 'text',\n                label: String(app.translator.trans(`wusong8899-tag-tiles.admin.Social${platform}Icon`)),\n                help: String(app.translator.trans(`wusong8899-tag-tiles.admin.Social${platform}IconHelp`)),\n            });\n        }\n\n        return this;\n    }\n\n    /**\n     * Register advanced splide configuration settings\n     */\n    registerAdvancedSplideSettings(): this {\n        // Minimum slides for loop mode\n        this.extensionData.registerSetting({\n            setting: `${this.extensionId}.AdvancedSplideMinSlidesForLoop`,\n            type: 'number',\n            label: String(app.translator.trans('wusong8899-tag-tiles.admin.AdvancedSplideMinSlidesForLoop')),\n            help: String(app.translator.trans('wusong8899-tag-tiles.admin.AdvancedSplideMinSlidesForLoopHelp')),\n        });\n\n        // Enable autoplay\n        this.extensionData.registerSetting({\n            setting: `${this.extensionId}.AdvancedSplideEnableAutoplay`,\n            type: 'boolean',\n            label: String(app.translator.trans('wusong8899-tag-tiles.admin.AdvancedSplideEnableAutoplay')),\n            help: String(app.translator.trans('wusong8899-tag-tiles.admin.AdvancedSplideEnableAutoplayHelp')),\n        });\n\n        // Autoplay interval\n        this.extensionData.registerSetting({\n            setting: `${this.extensionId}.AdvancedSplideAutoplayInterval`,\n            type: 'number',\n            label: String(app.translator.trans('wusong8899-tag-tiles.admin.AdvancedSplideAutoplayInterval')),\n            help: String(app.translator.trans('wusong8899-tag-tiles.admin.AdvancedSplideAutoplayIntervalHelp')),\n        });\n\n        // Enable loop mode\n        this.extensionData.registerSetting({\n            setting: `${this.extensionId}.AdvancedSplideEnableLoopMode`,\n            type: 'boolean',\n            label: String(app.translator.trans('wusong8899-tag-tiles.admin.AdvancedSplideEnableLoopMode')),\n            help: String(app.translator.trans('wusong8899-tag-tiles.admin.AdvancedSplideEnableLoopModeHelp')),\n        });\n\n        // Transition speed\n        this.extensionData.registerSetting({\n            setting: `${this.extensionId}.AdvancedSplideTransitionSpeed`,\n            type: 'number',\n            label: String(app.translator.trans('wusong8899-tag-tiles.admin.AdvancedSplideTransitionSpeed')),\n            help: String(app.translator.trans('wusong8899-tag-tiles.admin.AdvancedSplideTransitionSpeedHelp')),\n        });\n\n        // Gap between slides\n        this.extensionData.registerSetting({\n            setting: `${this.extensionId}.AdvancedSplideGap`,\n            type: 'string',\n            label: String(app.translator.trans('wusong8899-tag-tiles.admin.AdvancedSplideGap')),\n            help: String(app.translator.trans('wusong8899-tag-tiles.admin.AdvancedSplideGapHelp')),\n        });\n\n        // Pause on mouse enter\n        this.extensionData.registerSetting({\n            setting: `${this.extensionId}.AdvancedSplidePauseOnMouseEnter`,\n            type: 'boolean',\n            label: String(app.translator.trans('wusong8899-tag-tiles.admin.AdvancedSplidePauseOnMouseEnter')),\n            help: String(app.translator.trans('wusong8899-tag-tiles.admin.AdvancedSplidePauseOnMouseEnterHelp')),\n        });\n\n        // Enable grab cursor\n        this.extensionData.registerSetting({\n            setting: `${this.extensionId}.AdvancedSplideEnableGrabCursor`,\n            type: 'boolean',\n            label: String(app.translator.trans('wusong8899-tag-tiles.admin.AdvancedSplideEnableGrabCursor')),\n            help: String(app.translator.trans('wusong8899-tag-tiles.admin.AdvancedSplideEnableGrabCursorHelp')),\n        });\n\n        // Enable free mode\n        this.extensionData.registerSetting({\n            setting: `${this.extensionId}.AdvancedSplideEnableFreeMode`,\n            type: 'boolean',\n            label: String(app.translator.trans('wusong8899-tag-tiles.admin.AdvancedSplideEnableFreeMode')),\n            help: String(app.translator.trans('wusong8899-tag-tiles.admin.AdvancedSplideEnableFreeModeHelp')),\n        });\n\n        return this;\n    }\n\n    /**\n     * Register advertisement settings\n     */\n    registerAdvertisementSettings(): this {\n        // Enable advertisements setting\n        this.extensionData.registerSetting({\n            setting: `${this.extensionId}.EnableAds`,\n            type: 'boolean',\n            label: String(app.translator.trans('wusong8899-tag-tiles.admin.EnableAds')),\n            help: String(app.translator.trans('wusong8899-tag-tiles.admin.EnableAdsHelp')),\n        });\n\n        // Advertisement autoplay interval\n        this.extensionData.registerSetting({\n            setting: `${this.extensionId}.AdAutoplayInterval`,\n            type: 'number',\n            label: String(app.translator.trans('wusong8899-tag-tiles.admin.AdAutoplayInterval')),\n            help: String(app.translator.trans('wusong8899-tag-tiles.admin.AdAutoplayIntervalHelp')),\n        });\n\n        return this;\n    }\n\n    /**\n     * Register all settings for the extension\n     */\n    registerAllSettings(): this {\n        return this\n            .registerSocialMediaSettings()\n            .registerAdvancedSplideSettings()\n            .registerAdvertisementSettings();\n    }\n}\n\n/**\n * Configuration constants\n */\nexport const EXTENSION_CONFIG = {\n    EXTENSION_ID: 'wusong8899-tag-tiles',\n};\n\n/**\n * Initialize admin settings\n * @param extensionId - The extension identifier\n */\nexport const initializeAdminSettings = (\n    extensionId = EXTENSION_CONFIG.EXTENSION_ID\n): void => {\n    const generator = new SettingsGenerator(extensionId);\n    generator.registerAllSettings();\n};\n","import app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport type { AdData } from '../../common/config/types';\n\ninterface DynamicAdSettingsComponentAttrs {\n  extensionId: string;\n}\n\n/**\n * Dynamic component for managing advertisement settings with add/delete functionality\n */\nexport default class DynamicAdSettingsComponent extends Component<DynamicAdSettingsComponentAttrs> {\n  private ads: AdData[] = [];\n  private loading = false;\n  private nextId = 1;\n  private saveTimeouts: Record<string, NodeJS.Timeout> = {};\n\n  oninit(vnode: any) {\n    super.oninit(vnode);\n    this.loadExistingAds();\n  }\n\n  /**\n   * Load existing ads from settings\n   */\n  private loadExistingAds(): void {\n    const { extensionId } = this.attrs;\n    const ads: AdData[] = [];\n    \n    // Load existing ads from settings (check up to 100 slots for maximum flexibility)\n    for (let i = 1; i <= 100; i++) {\n      const linkKey = `${extensionId}.AdLink${i}`;\n      const imageKey = `${extensionId}.AdImage${i}`;\n      const link = app.data.settings[linkKey] || '';\n      const image = app.data.settings[imageKey] || '';\n      \n      // Only include ads that have at least image filled\n      if (image) {\n        ads.push({\n          id: i,\n          link,\n          image\n        });\n        this.nextId = Math.max(this.nextId, i + 1);\n      }\n    }\n    \n    this.ads = ads;\n    \n    // If no ads exist, add one empty ad to start with\n    if (ads.length === 0) {\n      this.addAd();\n    }\n  }\n\n  /**\n   * Add a new advertisement\n   */\n  private addAd(): void {\n    const newAd: AdData = {\n      id: this.nextId++,\n      link: '',\n      image: ''\n    };\n    \n    this.ads.push(newAd);\n    m.redraw();\n  }\n\n  /**\n   * Remove an advertisement\n   */\n  private removeAd(adId: number): void {\n    const { extensionId } = this.attrs;\n    const adIndex = this.ads.findIndex(ad => ad.id === adId);\n    \n    if (adIndex === -1) return;\n    \n    const ad = this.ads[adIndex];\n    \n    // Remove from backend\n    this.saveSetting(`${extensionId}.AdLink${ad.id}`, '');\n    this.saveSetting(`${extensionId}.AdImage${ad.id}`, '');\n    \n    // Remove from local state\n    this.ads.splice(adIndex, 1);\n    \n    // Ensure at least one ad exists for configuration\n    if (this.ads.length === 0) {\n      this.addAd();\n    }\n    \n    m.redraw();\n  }\n\n  /**\n   * Update advertisement data\n   */\n  private updateAd(adId: number, field: 'link' | 'image', value: string): void {\n    const { extensionId } = this.attrs;\n    const ad = this.ads.find(a => a.id === adId);\n    \n    if (!ad) return;\n    \n    ad[field] = value;\n    \n    // Save to backend\n    const settingKey = field === 'link' \n      ? `${extensionId}.AdLink${ad.id}` \n      : `${extensionId}.AdImage${ad.id}`;\n    \n    this.saveSetting(settingKey, value);\n  }\n\n  /**\n   * Save setting to backend with debouncing\n   */\n  private saveSetting(key: string, value: string): void {\n    // Clear existing timeout for this key\n    if (this.saveTimeouts[key]) {\n      clearTimeout(this.saveTimeouts[key]);\n    }\n    \n    // Set new timeout\n    this.saveTimeouts[key] = setTimeout(() => {\n      app.data.settings[key] = value;\n      \n      app.request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/settings',\n        body: {\n          [key]: value\n        }\n      }).catch(() => {\n        // Handle save error silently for now\n        // In a production app, you might want to show an error notification\n      });\n\n      // Clean up timeout reference\n      delete this.saveTimeouts[key];\n    }, 500);\n  }\n\n  /**\n   * Preview advertisement image\n   */\n  private previewImage(imageUrl: string): void {\n    if (!imageUrl) return;\n    \n    // Simple image preview in a new window\n    const previewWindow = window.open('', '_blank', 'width=800,height=600');\n    if (previewWindow) {\n      previewWindow.document.write(`\n        <html>\n          <head><title>Advertisement Preview</title></head>\n          <body style=\"margin:0;padding:20px;text-align:center;background:#f5f5f5;\">\n            <h3>Advertisement Preview</h3>\n            <img src=\"${imageUrl}\" style=\"max-width:100%;max-height:80vh;border:1px solid #ddd;border-radius:4px;\" />\n          </body>\n        </html>\n      `);\n    }\n  }\n\n  /**\n   * Validate URL format\n   */\n  private isValidUrl(url: string): boolean {\n    if (!url) return true; // Empty URL is valid (optional field)\n    \n    try {\n      new URL(url);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  view() {\n    const { extensionId } = this.attrs;\n    \n    return (\n      <div className=\"Form-group\">\n        <label className=\"FormLabel\">\n          {app.translator.trans('wusong8899-tag-tiles.admin.AdSettings')}\n        </label>\n        <div className=\"helpText\">\n          {app.translator.trans('wusong8899-tag-tiles.admin.AdSettingsHelp')}\n        </div>\n\n        <div className=\"DynamicAdSettings\">\n          {/* Ads list */}\n          {this.ads.map((ad, index) => this.renderAd(ad, index))}\n          \n          {/* Add button */}\n          <div className=\"DynamicAdSettings-addButton\" style={{ marginTop: '15px' }}>\n            <Button\n              className=\"Button Button--primary\"\n              icon=\"fas fa-plus\"\n              onclick={() => this.addAd()}\n            >\n              {app.translator.trans('wusong8899-tag-tiles.admin.AddAd')}\n            </Button>\n          </div>\n\n          {/* Global ads toggle */}\n          <div className=\"Form-group\" style={{ marginTop: '20px', paddingTop: '20px', borderTop: '1px solid #e8e8e8' }}>\n            <div>\n              <label className=\"checkbox\">\n                <input\n                  type=\"checkbox\"\n                  checked={app.data.settings[`${extensionId}.EnableAds`] === '1'}\n                  onchange={(e: Event) => {\n                    const target = e.target as HTMLInputElement;\n                    this.saveSetting(`${extensionId}.EnableAds`, target.checked ? '1' : '0');\n                  }}\n                />\n                {app.translator.trans('wusong8899-tag-tiles.admin.EnableAds')}\n              </label>\n              <div className=\"helpText\">\n                {app.translator.trans('wusong8899-tag-tiles.admin.EnableAdsHelp')}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * Render a single advertisement\n   */\n  private renderAd(ad: AdData, index: number) {\n    const { extensionId } = this.attrs;\n    const isImageValid = ad.image && this.isValidUrl(ad.image);\n    const isLinkValid = this.isValidUrl(ad.link);\n\n    return (\n      <div className=\"DynamicAdSettings-ad\" key={ad.id} style={{ \n        border: '1px solid #ddd', \n        borderRadius: '6px', \n        padding: '15px', \n        marginBottom: '15px',\n        backgroundColor: '#f9f9f9'\n      }}>\n        <div className=\"DynamicAdSettings-adHeader\" style={{ \n          display: 'flex', \n          justifyContent: 'space-between', \n          alignItems: 'center',\n          marginBottom: '15px'\n        }}>\n          <h4 style={{ margin: 0 }}>\n            {app.translator.trans('wusong8899-tag-tiles.admin.AdNumber', { number: index + 1 })}\n          </h4>\n          <div>\n            {ad.image && (\n              <Button\n                className=\"Button Button--primary\"\n                icon=\"fas fa-eye\"\n                onclick={() => this.previewImage(ad.image)}\n                style={{ marginRight: '8px' }}\n              >\n                {app.translator.trans('wusong8899-tag-tiles.admin.PreviewAd')}\n              </Button>\n            )}\n            <Button\n              className=\"Button Button--danger\"\n              icon=\"fas fa-trash\"\n              onclick={() => this.removeAd(ad.id)}\n              disabled={this.ads.length === 1}\n            >\n              {app.translator.trans('wusong8899-tag-tiles.admin.DeleteAd')}\n            </Button>\n          </div>\n        </div>\n        \n        <div className=\"DynamicAdSettings-adFields\">\n          {/* Image URL field */}\n          <div className=\"Form-group\">\n            <label className=\"FormLabel\">\n              {app.translator.trans('wusong8899-tag-tiles.admin.AdImage')} *\n            </label>\n            <input\n              className={`FormControl ${!isImageValid ? 'error' : ''}`}\n              type=\"url\"\n              placeholder=\"https://example.com/ad-image.jpg\"\n              value={ad.image}\n              oninput={(e: Event) => {\n                const target = e.target as HTMLInputElement;\n                this.updateAd(ad.id, 'image', target.value);\n              }}\n            />\n            {!isImageValid && ad.image && (\n              <div className=\"helpText error\">\n                {app.translator.trans('wusong8899-tag-tiles.admin.InvalidImageUrl')}\n              </div>\n            )}\n          </div>\n          \n          {/* Link URL field */}\n          <div className=\"Form-group\">\n            <label className=\"FormLabel\">\n              {app.translator.trans('wusong8899-tag-tiles.admin.AdLink')}\n            </label>\n            <input\n              className={`FormControl ${!isLinkValid ? 'error' : ''}`}\n              type=\"url\"\n              placeholder=\"https://example.com (optional)\"\n              value={ad.link}\n              oninput={(e: Event) => {\n                const target = e.target as HTMLInputElement;\n                this.updateAd(ad.id, 'link', target.value);\n              }}\n            />\n            {!isLinkValid && ad.link && (\n              <div className=\"helpText error\">\n                {app.translator.trans('wusong8899-tag-tiles.admin.InvalidLinkUrl')}\n              </div>\n            )}\n            <div className=\"helpText\">\n              {app.translator.trans('wusong8899-tag-tiles.admin.AdLinkHelp')}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * Clean up timeouts when component is removed\n   */\n  onremove(): void {\n    // Clear all pending timeouts\n    Object.values(this.saveTimeouts).forEach(timeout => {\n      clearTimeout(timeout);\n    });\n    this.saveTimeouts = {};\n  }\n}","import app from 'flarum/admin/app';\nimport { initializeAdminSettings } from './settings-generator';\nimport DynamicAdSettingsComponent from './components/dynamic-ad-settings';\n\napp.initializers.add('wusong8899-tag-tiles', (): void => {\n    initializeAdminSettings();\n    \n    // Register the dynamic ad settings component\n    app.extensionData\n        .for('wusong8899-tag-tiles')\n        .registerSetting(() => {\n            return m(DynamicAdSettingsComponent, {\n                extensionId: 'wusong8899-tag-tiles'\n            });\n        });\n});\n"],"names":["SettingsGenerator","extensionId","app","socialPlatforms","platform","EXTENSION_CONFIG","initializeAdminSettings","DynamicAdSettingsComponent","Component","vnode","ads","i","linkKey","imageKey","link","image","newAd","adId","adIndex","ad","field","value","a","settingKey","key","imageUrl","previewWindow","url","index","Button","e","target","isImageValid","isLinkValid","timeout"],"mappings":"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"}